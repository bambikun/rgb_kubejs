<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>KubeJS RGBブロック分割生成ツール</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 700px; margin: 2rem auto; }
  label { display: block; margin-top: 1rem; }
  input[type="text"] { width: 120px; font-family: monospace; font-size: 1rem; }
  select { font-size: 1rem; }
  button { margin-top: 1rem; padding: 0.5rem 1rem; font-size: 1rem; cursor: pointer; }
  textarea { width: 100%; height: 400px; margin-top: 1rem; font-family: monospace; white-space: pre; }
</style>
</head>
<body>
  <h1>KubeJS RGBブロック分割生成ツール</h1>

  <label>
    開始カラーコード（16進6桁）
    <input type="text" id="startColor" value="000000" maxlength="6" />
  </label>

  <label>
    終了カラーコード（16進6桁）
    <input type="text" id="endColor" value="0000ff" maxlength="6" />
  </label>

  <label>
    ブロックタイプを選択
    <select id="blockType">
      <option value="block">ブロック</option>
      <option value="slab">ハーフブロック</option>
      <option value="stairs">階段</option>
    </select>
  </label>

  <button id="generateBtn">コード生成</button>

  <label>
    生成されたKubeJSコード
    <textarea id="outputCode" readonly></textarea>
  </label>

  <script>
    function toHex6(num) {
      return num.toString(16).padStart(6, '0');
    }

    function isValidHex6(str) {
      return /^[0-9a-fA-F]{6}$/.test(str);
    }

    document.getElementById('generateBtn').addEventListener('click', () => {
      const startStr = document.getElementById('startColor').value.trim();
      const endStr = document.getElementById('endColor').value.trim();
      const type = document.getElementById('blockType').value;

      if(!isValidHex6(startStr) || !isValidHex6(endStr)) {
        alert('開始・終了カラーコードは6桁の16進数で入力してください。例: 00ff00');
        return;
      }

      const start = parseInt(startStr, 16);
      const end = parseInt(endStr, 16);

      if(start > end) {
        alert('開始カラーコードは終了カラーコード以下にしてください。');
        return;
      }

      // 処理範囲が大きすぎる場合の警告（例:10万色以上）
      if(end - start > 100000) {
        if(!confirm(`指定された色範囲は${end - start + 1}色です。処理に時間がかかる可能性があります。続行しますか？`)) {
          return;
        }
      }

      let code = '';

      for(let i = start; i <= end; i++) {
        const c = toHex6(i);
        let id = c.toLowerCase();
        let displayName = '';

        if(type === 'slab') {
          id += '_slab';
          displayName = `Color Slab #${c.toUpperCase()}`;
        } else if(type === 'stairs') {
          id += '_stairs';
          displayName = `Color Stairs #${c.toUpperCase()}`;
        } else {
          displayName = `Color Block #${c.toUpperCase()}`;
        }

        const hardness = (type === 'slab') ? '1.0' : '1.5';

        code += `event.create('${id}')\n`;
        code += `  .material('wood')\n`;
        code += `  .hardness(${hardness})\n`;
        code += `  .displayName('${displayName}')\n`;
        code += `  .texture('${c.toLowerCase()}');\n\n`;
      }

      document.getElementById('outputCode').value = code;
    });
  </script>
</body>
</html>
